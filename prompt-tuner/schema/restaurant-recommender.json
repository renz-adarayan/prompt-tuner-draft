{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Restaurant Recommender Schema",
  "description": "Schema for restaurant recommendation system with reviews, menus, and user preferences",
  "type": "object",
  "properties": {
    "restaurants": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Restaurant"
      }
    },
    "users": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/User"
      }
    },
    "recommendations": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Recommendation"
      }
    }
  },
  "required": ["restaurants", "users", "recommendations"],
  "definitions": {
    "Restaurant": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique restaurant identifier"
        },
        "name": {
          "type": "string",
          "description": "Name of the restaurant"
        },
        "location": {
          "$ref": "#/definitions/Location"
        },
        "cuisine_type": {
          "type": "string",
          "enum": ["Italian", "Chinese", "Japanese", "Mexican", "Indian", "French", "Thai", "American", "Mediterranean", "Korean", "Vietnamese", "Greek", "Spanish", "Lebanese", "Other"],
          "description": "Primary cuisine type"
        },
        "price_range": {
          "type": "string",
          "enum": ["$", "$$", "$$$", "$$$$"],
          "description": "Price range indicator"
        },
        "ambiance": {
          "type": "string",
          "enum": ["casual", "fine_dining", "family_friendly", "romantic", "business", "trendy", "cozy", "outdoor"],
          "description": "Restaurant ambiance type"
        },
        "dietary_options": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["vegetarian", "vegan", "gluten_free", "halal", "kosher", "keto", "low_carb", "dairy_free"]
          },
          "description": "Available dietary options"
        },
        "operating_hours": {
          "$ref": "#/definitions/OperatingHours"
        },
        "contact_info": {
          "$ref": "#/definitions/ContactInfo"
        },
        "menu_items": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MenuItem"
          }
        },
        "reviews": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Review"
          }
        },
        "features": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["delivery", "takeout", "reservations", "outdoor_seating", "parking", "wifi", "live_music", "bar", "private_dining", "wheelchair_accessible"]
          },
          "description": "Restaurant features and amenities"
        }
      },
      "required": ["id", "name", "location", "cuisine_type", "price_range", "ambiance", "menu_items", "reviews"]
    },
    "Location": {
      "type": "object",
      "properties": {
        "address": {
          "type": "string",
          "description": "Street address"
        },
        "city": {
          "type": "string",
          "description": "City name"
        },
        "state": {
          "type": "string",
          "description": "State or province"
        },
        "postal_code": {
          "type": "string",
          "description": "Postal or ZIP code"
        },
        "country": {
          "type": "string",
          "description": "Country name"
        },
        "coordinates": {
          "$ref": "#/definitions/Coordinates"
        }
      },
      "required": ["address", "city", "state", "postal_code", "country"]
    },
    "Coordinates": {
      "type": "object",
      "properties": {
        "latitude": {
          "type": "number",
          "minimum": -90,
          "maximum": 90,
          "description": "Latitude coordinate"
        },
        "longitude": {
          "type": "number",
          "minimum": -180,
          "maximum": 180,
          "description": "Longitude coordinate"
        }
      },
      "required": ["latitude", "longitude"]
    },
    "OperatingHours": {
      "type": "object",
      "properties": {
        "monday": {"$ref": "#/definitions/DayHours"},
        "tuesday": {"$ref": "#/definitions/DayHours"},
        "wednesday": {"$ref": "#/definitions/DayHours"},
        "thursday": {"$ref": "#/definitions/DayHours"},
        "friday": {"$ref": "#/definitions/DayHours"},
        "saturday": {"$ref": "#/definitions/DayHours"},
        "sunday": {"$ref": "#/definitions/DayHours"}
      }
    },
    "DayHours": {
      "type": "object",
      "properties": {
        "open": {
          "type": "string",
          "pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$",
          "description": "Opening time in HH:MM format"
        },
        "close": {
          "type": "string",
          "pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$",
          "description": "Closing time in HH:MM format"
        },
        "closed": {
          "type": "boolean",
          "description": "Whether the restaurant is closed on this day"
        }
      }
    },
    "ContactInfo": {
      "type": "object",
      "properties": {
        "phone": {
          "type": "string",
          "description": "Phone number"
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "Email address"
        },
        "website": {
          "type": "string",
          "format": "uri",
          "description": "Website URL"
        }
      }
    },
    "MenuItem": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique menu item identifier"
        },
        "name": {
          "type": "string",
          "description": "Name of the menu item"
        },
        "description": {
          "type": "string",
          "description": "Description of the menu item"
        },
        "category": {
          "type": "string",
          "enum": ["appetizer", "main_course", "dessert", "beverage", "side_dish", "salad", "soup", "pasta", "pizza", "sandwich", "seafood", "meat", "vegetarian"],
          "description": "Menu item category"
        },
        "price": {
          "type": "number",
          "minimum": 0,
          "description": "Price of the menu item"
        },
        "dietary_tags": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["vegetarian", "vegan", "gluten_free", "halal", "kosher", "keto", "low_carb", "dairy_free", "spicy", "nut_free"]
          },
          "description": "Dietary tags for the menu item"
        },
        "popularity_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 10,
          "description": "Popularity score based on orders"
        }
      },
      "required": ["id", "name", "category", "price"]
    },
    "Review": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique review identifier"
        },
        "user_id": {
          "type": "string",
          "description": "ID of the user who wrote the review"
        },
        "rating": {
          "type": "number",
          "minimum": 1,
          "maximum": 5,
          "description": "Overall rating from 1 to 5"
        },
        "food_rating": {
          "type": "number",
          "minimum": 1,
          "maximum": 5,
          "description": "Food quality rating"
        },
        "service_rating": {
          "type": "number",
          "minimum": 1,
          "maximum": 5,
          "description": "Service quality rating"
        },
        "ambiance_rating": {
          "type": "number",
          "minimum": 1,
          "maximum": 5,
          "description": "Ambiance rating"
        },
        "value_rating": {
          "type": "number",
          "minimum": 1,
          "maximum": 5,
          "description": "Value for money rating"
        },
        "comment": {
          "type": "string",
          "description": "Written review comment"
        },
        "review_date": {
          "type": "string",
          "format": "date",
          "description": "Date the review was written"
        },
        "visit_date": {
          "type": "string",
          "format": "date",
          "description": "Date of the restaurant visit"
        },
        "party_size": {
          "type": "integer",
          "minimum": 1,
          "description": "Number of people in the dining party"
        },
        "occasion": {
          "type": "string",
          "enum": ["casual_dining", "date_night", "business_meeting", "celebration", "family_gathering", "solo_dining", "group_outing"],
          "description": "Occasion for the visit"
        }
      },
      "required": ["id", "user_id", "rating", "comment", "review_date"]
    },
    "User": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique user identifier"
        },
        "name": {
          "type": "string",
          "description": "User's name"
        },
        "preferences": {
          "$ref": "#/definitions/UserPreferences"
        },
        "location": {
          "$ref": "#/definitions/Location"
        },
        "dining_history": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DiningHistory"
          }
        }
      },
      "required": ["id", "name", "preferences"]
    },
    "UserPreferences": {
      "type": "object",
      "properties": {
        "preferred_cuisines": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["Italian", "Chinese", "Japanese", "Mexican", "Indian", "French", "Thai", "American", "Mediterranean", "Korean", "Vietnamese", "Greek", "Spanish", "Lebanese", "Other"]
          },
          "description": "User's preferred cuisine types"
        },
        "price_range": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["$", "$$", "$$$", "$$$$"]
          },
          "description": "Acceptable price ranges"
        },
        "dietary_restrictions": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["vegetarian", "vegan", "gluten_free", "halal", "kosher", "keto", "low_carb", "dairy_free", "nut_allergy"]
          },
          "description": "User's dietary restrictions"
        },
        "preferred_ambiance": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["casual", "fine_dining", "family_friendly", "romantic", "business", "trendy", "cozy", "outdoor"]
          },
          "description": "Preferred restaurant ambiance"
        },
        "max_distance": {
          "type": "number",
          "minimum": 0,
          "description": "Maximum distance willing to travel (in miles/km)"
        },
        "preferred_features": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["delivery", "takeout", "reservations", "outdoor_seating", "parking", "wifi", "live_music", "bar", "private_dining", "wheelchair_accessible"]
          },
          "description": "Preferred restaurant features"
        }
      }
    },
    "DiningHistory": {
      "type": "object",
      "properties": {
        "restaurant_id": {
          "type": "string",
          "description": "ID of the restaurant visited"
        },
        "visit_date": {
          "type": "string",
          "format": "date",
          "description": "Date of the visit"
        },
        "rating_given": {
          "type": "number",
          "minimum": 1,
          "maximum": 5,
          "description": "Rating given by the user"
        },
        "items_ordered": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Menu items ordered during the visit"
        }
      },
      "required": ["restaurant_id", "visit_date", "rating_given"]
    },
    "Recommendation": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique recommendation identifier"
        },
        "user_id": {
          "type": "string",
          "description": "ID of the user receiving the recommendation"
        },
        "restaurant_id": {
          "type": "string",
          "description": "ID of the recommended restaurant"
        },
        "recommendation_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 10,
          "description": "Recommendation confidence score"
        },
        "recommendation_date": {
          "type": "string",
          "format": "date-time",
          "description": "When the recommendation was generated"
        },
        "reason": {
          "type": "string",
          "description": "Explanation for why this restaurant was recommended"
        },
        "matching_factors": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["cuisine_match", "price_match", "location_proximity", "dietary_compatibility", "ambiance_match", "high_ratings", "popular_items", "similar_users_liked", "new_restaurant", "trending"]
          },
          "description": "Factors that contributed to this recommendation"
        },
        "suggested_items": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Specific menu items recommended for this user"
        }
      },
      "required": ["id", "user_id", "restaurant_id", "recommendation_score", "recommendation_date", "reason"]
    }
  }
}
